<!DOCTYPE html>
<head>

	<h2> Click this button to display the JSON content </h2>
	
</head>

<body>

<button id="click" style="color:red; background-color:blue; border-radius:20px;"> 
Click me </button>


<table id="table" border="1">
<tr>
<th> firstName </th>
<th> lastName </th>
</tr>
</table> 

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"> 
</script>
<script src="https://maps.google.com/maps/api/js?sensor=false" 
          type="text/javascript"></script>


<script>
     $(document).ready(function(){
     $("#map").css('visibility', 'hidden');
     $("#table").css('visibility', 'hidden');
     
	$("#click").click(function(){
     $("#map").css('visibility', 'visible');
     $("#table").css('visibility', 'visible');
    $.ajax({
        url: '/json',
	type: 'GET',
        dataType: "json",
	
        success: function(data) {
		console.log("success");
	var txt = '';
	for(var i = 0, size = data.length; i < size ; i++)
	{
   var item = data[i];
   txt = txt + "<tr><td id = td>"+ item.firstName + "</td><td>" + item.lastName+
   "</td><td>";
   
    } 
    console.log(txt);
    
    var length= $("#table").find('td:td').length;	
	console.log(length);

	if(length==0){
	$("#table").append(txt);
	}

	}
	});
	});
	});

</script>
 
  <div id="map" style="width: 500px; height: 400px;"></div>

  <script type="text/javascript">
    
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 10,
      center: new google.maps.LatLng(-33.92, 151.25),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    $.ajax({
        url: '/json',
	type: 'GET',
        dataType: "json",
	
        success: function(data) {
		console.log("success");
	var txt = '';
	for(var i = 0, size = data.length; i < size ; i++)
	{
        
       var item = data[i];
   txt = item['location'];
   var locString=txt.split(',',2);
   var lat=parseFloat(locString[0]);
   var lon=parseFloat(locString[1]);
   marker = new google.maps.Marker({
   position: new google.maps.LatLng(lat, lon),
   map: map
    });
    
     google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
    //      infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    
    }
    }
	});



<div id="test-chart"></div>

//setting up width of the chart, height, X-axis, Y-axis scales

var w = 515;
var h = 660;
var x = d3.scale.linear()
  .domain([0, d3.max(data, function(d) { return d.value; })])
  .range([0, w]);
var y = d3.scale.ordinal()
  .domain(d3.range(data.length))
  .rangeBands([0, h], 0.1);
  
  
  //array holding colors for the rectangles
  
  
  var color = d3.scale.ordinal()
  .range(["red", "blue"]);
  
  var svg = d3.select("#test-chart")
  .append("svg")
    .attr("width", w)
    .attr("height", h)
  .append("g")
    .attr("transform", "translate(20,0)");
    
    
    //Initial SVG element creation
    var bars = svg.selectAll(".bar")
    .data(data)
  .enter().append("g")
    .attr("class", "bar")
    .attr("transform", function(d, i) { return "translate(" + 0 + "," + y(i+1) + ")"; });

  //Initial bar element creation
bars.append("rect")
  .attr("fill", function(d, i) { return color(i%2); })
  .attr("width", function(d) { return x(d.value); })
  .attr("height", y.rangeBand());
  
  //Initial bar label creation
  bars.append("text")
  .attr("x", function(d) { return x(d.value); })
  .attr("y", 0 + y.rangeBand() / 2)
  .attr("dx", -6)
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .text(function(d) { return d.value; });
  
  //sending ajax get request to server
  $("#click").click(function(event) {
  var data = [];
  var req = $.ajax({
    url: '/json',
    type: 'GET',
    dataType: 'json',
    success: function(response) {
      data = response;
    }
  });
  $.when(req).done(function() {
      var rect = svg.selectAll(".bar rect").data(data);
      var text = svg.selectAll(".bar text").data(data);
      var delay = function(d, i) { return i * 50; };
      rect.transition().duration(750)
        .delay(delay)
        .attr("width", function(d) { return x(d.value); });
      text.transition().duration(750)
        .delay(delay)
        .attr("x", function(d) { return x(d.value); })
        .text(function(d) { return d.value; });
  });
});


var rect = svg.selectAll(".bar rect").data(data);
    var text = svg.selectAll(".bar text").data(data);
    
     var delay = function(d, i) { return i * 50; };
     
      rect.transition().duration(750)
      .delay(delay)
      .attr("width", function(d) { return x(d.value); });
    text.transition().duration(750)
      .delay(delay)
      .attr("x", function(d) { return x(d.value); })
      .text(function(d) { return d.value; });


</script> 
</body>
</html>  



